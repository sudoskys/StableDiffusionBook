# Prompts Engineering

è¿™é‡Œæ˜¯ä¸ºè¿›ä¸€æ­¥æ•™å­¦å¦‚ä½•ä¹¦å†™æç¤ºè¯æ‰€å†™çš„ä¸€ä¸ªå°æŒ‡å—ï¼Œè®©ä½ æŒæ¡åˆæ­¥è°ƒæ•´ç”»é¢çš„èƒ½åŠ›ã€‚

æ­¤é¡µå†…å®¹å±äº WebUi çš„ç¨‹åºç‰¹æ€§ã€‚å¦‚æœä½ æ˜¯ NAI ç”¨æˆ·ï¼Œè¯·å»é˜…è¯» [å®˜ç½‘ Docs](https://docs.novelai.net/image/promptmixing.html)ã€‚

## å…¥é—¨

ä¹¦å†™ Prompt çš„æ„Ÿæ€§æ„Ÿå—ä¸ºï¼šé™å®šæ•°æ®èŒƒå›´å†…ç¬¦åˆæœŸæœ›çš„æ ·æœ¬è¶Šå¤šï¼Œç»“æœè¶Šç¬¦åˆé¢„æœŸã€‚

### å†™ä»€ä¹ˆï¼Ÿ

Ai çš„ç†è§£ç”±ä»£ç è¾“å…¥ï¼Œç”± Tokenizer å®šä¹‰ï¼Œä½ å¯ä»¥æµ‹è¯• UI çš„ç›¸å…³ä»£ç è·å–å®é™…çš„åˆ†è¯è¾“å…¥ã€‚

- [NAI's prompt Tokenizer](https://novelai.net/tokenizer)
- [WebUiTokenizer](https://github.com/AUTOMATIC1111/stable-diffusion-webui-tokenizer)

**å•è¯**

æ™®é€šå¸¸è§çš„å•è¯ï¼Œæœ€å¥½æ˜¯å¯ä»¥åœ¨æ•°æ®é›†æ¥æºç«™ç‚¹æ‰¾åˆ°çš„è‘—åæ ‡ç­¾ï¼ˆæ¯”å¦‚ Danbooru)ã€‚å•è¯çš„é£æ ¼è¦å’Œå›¾åƒçš„é£æ ¼æ­é…ï¼ˆæ¯”å¦‚åœ¨æ¨ç†åŠ¨æ¼«æ’ç”»æ—¶ä¸åº”è¯¥åœ¨æç¤ºè¯åŠ å…¥ `ä¹å±±å¤§ä½›` çš„è¯æ±‡ï¼‰ï¼Œå¦åˆ™ä¼šå‡ºç°æ··æ‚çš„é£æ ¼æˆ–å™ªç‚¹ã€‚

> å¯¹äºæŸäº›åŸºäº Stable Diffusion è®­ç»ƒçš„åŠ¨æ¼«æ¨¡å‹æ¥è¯´ï¼Œæœ€å¥½ä½¿ç”¨ Danbooru ä¸­å¯ä»¥æ‰¾åˆ°çš„æ ‡ç­¾ã€‚

**è‡ªç„¶è¯­è¨€**

Prompt ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨è‡ªç„¶è¯­è¨€ï¼Œè¯­ç§å¯ä»¥æ˜¯è‹±æ–‡ï¼Œæ—¥æ–‡ï¼Œç‰¹æ®Šç¬¦å·æˆ–ä¸€äº›ä¸­æ–‡ï¼Œè¿™ç”±æ•°æ®é›†å†³å®šã€‚

è‡ªç„¶è¯­è¨€çš„å‡†ç¡®åº¦å–å†³äº Clip çš„åˆ†è¯æƒ…å†µï¼Œå¦‚æœä½ è¿½æ±‚ç²¾ç¡®çš„ç»“æœï¼Œè¯·å‹¿ä½¿ç”¨ã€‚

ä½¿ç”¨è‡ªç„¶è¯­è¨€çš„æ—¶å€™è¦é¿å… `with` ä¹‹ç±»çš„è¿æ¥è¯æˆ–å¤æ‚çš„è¯­æ³•ï¼Œå®ƒä»¬å¾ˆå¤šä½™ã€‚

**emoji**

ä½ å¯ä»¥ä½¿ç”¨ è¥¿æ–¹é¢œæ–‡å­— `(^_^)`ï¼Œemoji ğŸŒ»ã€‚emoji ä½œä¸ºåªæœ‰ä¸€ä¸ªå­—ç¬¦çš„â€œè¯è¯­â€æ•ˆæœå¾ˆç²¾ç¡®ã€‚

- Emoji åœ¨æ„å›¾ä¸Šæœ‰å½±å“ï¼Œæ¯”å¦‚ `ğŸ’â˜ºï¸ğŸ’`ã€‚
- Emoji å› ä¸ºåªæœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥åœ¨è¯­ä¹‰å‡†ç¡®åº¦ä¸Šè¡¨ç°è‰¯å¥½ã€‚
- [è¡¨æƒ…ç¬¦å·å‚è€ƒ](https://unicode.org/emoji/charts/emoji-list.html)

**é¢œæ–‡å­—**

å¯¹äº**ä½¿ç”¨ Danbooru æ•°æ®çš„æ¨¡å‹**æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ é¢œæ–‡å­— æ¥æ§åˆ¶è¡¨æƒ…ï¼
```
:-) å¾®ç¬‘ :-( ä¸æ‚¦ ;-) ä½¿çœ¼è‰² :-D å¼€å¿ƒ :-P åèˆŒå¤´ :-C å¾ˆæ‚²ä¼¤ :-O æƒŠè®¶ å¼ å¤§å£ :-/ æ€€ç–‘
```

- é¢œæ–‡å­—åœ¨æ„å›¾ä¸Šæœ‰å½±å“ã€‚

- ä»…æ”¯æŒè¥¿æ–¹é¢œæ–‡å­—ï¼Œè¯¦ç»†å†…å®¹è¯·è§ [Danbooru é¢œæ–‡å­—éƒ¨åˆ†](https://danbooru.donmai.us/wiki_pages/tag_group%3Aface_tags) æˆ– [ç»´åŸºç™¾ç§‘](https://zh.wikipedia.org/wiki/%E8%A1%A8%E6%83%85%E7%AC%A6%E8%99%9F%E5%88%97%E8%A1%A8?oldformat=true)

**ç©ºæ ¼**

- é€—å·å‰åçš„å°‘é‡ç©ºæ ¼å¹¶ä¸å½±å“å®é™…æ•ˆæœã€‚

### å¦‚ä½•å†™ï¼Ÿ

å…ˆæƒ³ä¸€ä¸‹ä½ è¦ç”»ä»€ä¹ˆï¼Œä¾‹å¦‚ ä¸»é¢˜ï¼Œå¤–è¡¨ï¼Œæƒ…ç»ªï¼Œè¡£æœï¼Œå§¿åŠ¿ï¼ŒèƒŒæ™¯ ä¸€ç±»ï¼Œç„¶åå‚è€ƒæ•°æ®é›†æ ‡ç­¾è¡¨ï¼ˆå¦‚æœæœ‰çš„è¯ï¼Œæ¯”å¦‚ Danbooru, Pixiv ç­‰ï¼‰ã€‚

ç„¶åå°†ä½ æƒ³è¦çš„ç›¸ä¼¼çš„æç¤ºè¯ç»„åˆåœ¨ä¸€èµ·ï¼Œè¯·ä½¿ç”¨è‹±æ–‡åŠè§’ `,` åšåˆ†éš”ç¬¦ï¼Œå¹¶å°†è¿™äº›æŒ‰ä»æœ€é‡è¦åˆ°æœ€ä¸é‡è¦çš„é¡ºåºæ’åˆ—ã€‚

```
(quality), (subject)(style), (action/scene), (artist), (filters)
```
`(quality)` ä»£è¡¨ç”»é¢çš„å“è´¨ï¼Œæ¯”å¦‚ `low res` ç»“åˆ `sticker` ä½¿ç”¨æ¥ â€œåˆ©ç”¨â€ æ›´å¤šæ•°æ®é›†ï¼Œ `1girl` ç»“åˆ `high quality` ä½¿ç”¨æ¥è·å¾—é«˜è´¨é‡å›¾åƒã€‚

`(subject)` ä»£è¡¨ç”»é¢çš„ä¸»é¢˜ï¼Œé”šå®šç”»é¢å†…å®¹ï¼Œè¿™æ˜¯ä»»ä½•æç¤ºçš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ã€‚`(style)` æ˜¯ç”»é¢é£æ ¼ï¼Œå¯é€‰ã€‚

`(action/scene)` ä»£è¡¨åŠ¨ä½œ/åœºæ™¯ï¼Œæè¿°äº†ä¸»ä½“åœ¨å“ªé‡Œåšäº†ä»€ä¹ˆã€‚

`(artist)` ä»£è¡¨è‰ºæœ¯å®¶åå­—æˆ–è€…å‡ºå“å…¬å¸åå­—ã€‚

`(filters)` ä»£è¡¨ä¸€äº›ç»†èŠ‚ï¼Œè¡¥å……ã€‚å¯ä»¥ä½¿ç”¨ è‰ºæœ¯å®¶ï¼Œå·¥ä½œå®¤ï¼Œæ‘„å½±æœ¯è¯­ï¼Œè§’è‰²åå­—ï¼Œé£æ ¼ï¼Œç‰¹æ•ˆç­‰ç­‰ã€‚

**è‰ºæœ¯é£æ ¼**

ä½ å¯ä»¥é€šè¿‡æŒ‡å®šé£æ ¼å…³é”®è¯æ¥åˆ›ä½œå¸¦æœ‰ç‰¹æ•ˆæˆ–æŒ‡å®šç”»é£çš„å›¾ç‰‡ã€‚

[NovelAI ä½¿ç”¨æ•™ç¨‹å’Œé­”å’’è¯¾å ‚](https://space.bilibili.com/8612008/channel/collectiondetail?sid=787691)

[äººå¶æ•™å®¤çš„æµ‹è¯•è®°å½•](https://www.yuque.com/longyuye/lmgcwy)

[é£æ ¼åŒ–ï¼š32 ç§](https://www.bilibili.com/video/BV1TP411N71t/)

é™¤æ­¤ä¹‹å¤–ï¼Œä½ è¿˜å¯ä»¥è®­ç»ƒé£æ ¼æ¨¡å‹æ¥è®­ç»ƒè‡ªå·±çš„ç†æƒ³é£æ ¼ï¼Œè¯¦è§ `æ¨¡å‹è®­ç»ƒ` ç« èŠ‚ã€‚

æ›´å¤šå‚è€ƒå¯ä»¥è¯» [ä¸ºæ–‡å­—è½¬å›¾åƒ Ai æç¤ºç¼–å†™æŒ‡å—ï¼šA Guide to Writing Prompts for Text-to-image AI](https://docs.google.com/document/d/1XUT2G9LmkZataHFzmuOtRXnuWBfhvXDAo8DkS--8tec/edit#)

### å†™å¤šé•¿ï¼Ÿ

**ä¹¦å†™é•¿åº¦**

ç”±äºæ¨¡å‹é™åˆ¶ï¼Œprompt å¹¶ä¸æ˜¯æ— é™çš„ï¼Œä¸€èˆ¬ positive token åœ¨ 75-80 ä¹‹é—´ï¼Œ75 å­—ç¬¦åçš„å†…å®¹ä¼šè¢«æˆªæ–­ã€‚æ‰€ä»¥æç¤ºä¸è¦å¤ªé•¿ï¼Œè¶…è¿‡ 100 å°±æœ‰å¤±è´¥é£é™©ã€‚

- WebUi

åœ¨ WebUi ä¸­ï¼Œä½  **å¯ä»¥** å†™ 75 ä¸ªè¯æ±‡ä»¥ä¸Šçš„æç¤ºã€‚WebUi é€šè¿‡å¯¹æç¤ºè¯è¿›è¡Œåˆ†ç»„å…‹æœäº†è¿™ç§é™åˆ¶ã€‚å½“æç¤ºè¶…è¿‡ 75 ä¸ª `token`ï¼ˆæ¯”å¦‚ 150 ä¸ª `token`ï¼‰æ—¶ï¼ŒWebUi å°†åˆ†ç»„æç¤ºè¯ï¼Œæäº¤å¤šç»„ 75 ä¸ª `token`ã€‚æ ‡è®°åªå…·æœ‰åŒä¸€é›†åˆä¸­å…¶ä»–å†…å®¹çš„ä¸Šä¸‹æ–‡ã€‚

ä½†è¿™å¯¼è‡´äº†ä¸€ä¸ªé—®é¢˜ï¼šå¯èƒ½åœ¨ç¬¬ä¸€ç»„å’Œç¬¬äºŒç»„ä¹‹é—´çš„è¾¹ç•Œå¤„æœ‰ `bule hair`ï¼Œæ ‡è®° `blue` å°†åœ¨ç¬¬ä¸€ç»„ä¸­ï¼Œ`hair` å°†åœ¨ç¬¬äºŒç»„ä¸­ã€‚è¿™å¯¼è‡´ç»“æœä¸å‡†ç¡®ï¼Œå› ä¸º `bule hair` è¢«ä¸åˆç†åœ°åˆ†å‰²äº†ï¼

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ–°ç‰ˆæœ¬å¢åŠ äº†ä¸€ä¸ªé€‰é¡¹ `Increase coherency by padding from the last comma within n tokens when using more than 75 tokens`ï¼Œè¿™ä¸ªè®¾ç½®è®©ç¨‹åºè¯•å›¾é€šè¿‡æŸ¥æ‰¾æœ€å N ä¸ªæ ‡è®°ä¸­æ˜¯å¦æœ‰æœ€åä¸€ä¸ªé€—å·æ¥ç¼“è§£è¿™ç§æƒ…å†µï¼Œå¦‚æœæœ‰ï¼Œåˆ™å°†æ‰€æœ‰ç»è¿‡è¯¥é€—å·çš„å†…å®¹ä¸€èµ·ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªé›†åˆä¸­ã€‚

```
    æœ‰è¯æ¡ä¸º `...,Comma,blue hair,PADDING,...`
    
    ç¬¬ 75 ä¸ªè¯ä¸º `blue`
    
    ä½¿ç”¨è¯¥é€‰é¡¹å‰
    
    é›†åˆ 1:{[74]=Commaï¼Œ[75]=blue}ï¼Œé›†åˆ 2:{[76]=hair, [77]=PADDING}
    
    ä½¿ç”¨è¯¥é€‰é¡¹å
    
    é›†åˆ 1:{[074]=Commaï¼Œ[75]=PADDING}ï¼Œé›†åˆ 2:{[76]=blueï¼Œ[77]=hair}
    
    å¦‚æœæ‚¨çš„æç¤ºå°äºç­‰äº 75 ä¸ªæ ‡è®°ï¼Œä¸ä¼šå‘ç”Ÿåˆ†ç»„ã€‚
```

!!! tip
    ä¸å †å  prompt æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œä½†æ˜¯å¦‚æœä½ ç¡®å®æœ‰å¾ˆå¤šå†…å®¹è¦å†™ï¼Œå¯ä»¥é€‚å½“æé«˜ `step` æ•°é‡ã€‚

### é¡ºåº

æ ¹æ®å›¾åƒæ¨ç†è¿‡ç¨‹ï¼Œæç¤ºè¯æ”¾å…¥çš„é¡ºåºå¯ä»¥è§†ä¸ºä¼˜å…ˆçº§ï¼Œåœ¨å‰é¢çš„ Prompt é”šå®šäº†ç”»é¢çš„ä¸»ä½“å†…å®¹ã€‚è¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆæˆ‘ä¼šåœ¨ä¸Šæ–‡ä¸­å¼ºè°ƒ Prompt çš„é¡ºåºã€‚

![å›¾åƒç”Ÿæˆçš„æè¿°](https://jalammar.github.io/images/stable-diffusion/stable-diffusion-image-generation.png)

> thanks https://jalammar.github.io/illustrated-stable-diffusion/

å¦‚æœä½ ä½¿ç”¨ WebUiï¼ŒWebUi ä¼šå¯¹é•¿ä¸²çš„ Prompt ä»¥ 75 ä¸ª Token ä¸€ç»„åˆ†å¼€æ¸²æŸ“ã€‚

### Prompt å†²çª

**åˆ†ç±»å†²çª**

    å¦‚æœä½ æƒ³è¦ä¸€å¼  sticker çš„è¯ï¼Œè´´çº¸åœ¨æ•°æ®é›†å†…è‚¯å®šä¸ä¼šæ‰“ä¸Š `masterpiece, best quility,` æ ‡ç­¾ï¼Œè€Œæ˜¯ `normal quality` è¿™æ ·çš„æ ‡ç­¾ã€‚

    ç±»ä¼¼è¿˜æœ‰åƒç´ ä½œå“ï¼Œä¹¦å†™æç¤ºè¯çš„æ—¶å€™ï¼Œä½ åº”è¯¥ç§»é™¤ä¸€äº›å†²çªçš„æç¤ºã€‚

**é£æ ¼å†²çª**

    æ¯”å¦‚ä½ æƒ³å¾—åˆ°ä¸€å¼ å„¿ç«¥åœ¨æ²™æ»©ç©è€çš„ `flatcolor` é£æ ¼çš„æ’ç”»ã€‚

    é‚£ä¹ˆä½¿ç”¨ `loli` ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºå®ƒé™„å¸¦äº†æ ‡å‡†ç»Ÿä¸€çš„ç”»é£å±æ€§ï¼Œä¼šå¾ˆå¤§åœ°å½±å“ç»“æœã€‚

    è§£å†³åŠæ³•ï¼šé™ä½æƒé‡ï¼Œæ›´æ¢ prompt.

**æ¬¡å…ƒå†²çª**

    æŸäº›åŠ¨æ¼«æ¨¡å‹æ˜¯åŸºäºåŸå§‹ Stable Diffusion è®­ç»ƒçš„åº”è¯¥å°½é‡é¿å…å‡ºç°åŸå§‹æ¨¡å‹çš„å†…å®¹ã€‚

è¯·åŠ¡å¿…æ³¨æ„ã€‚

## æç¤ºè¯ç¼–è¾‘

é€šè¿‡æç¤ºè¯ç¼–è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°å‘Šè¯‰æ¨¡å‹ â€œæˆ‘ç‚¹çš„èœéœ€è¦æ”¾å¤šå°‘ç›â€ã€‚

[åŸå§‹å®ç°](https://github.com/bloc97/CrossAttentionControl)

### äººå·¥åˆ†å‰²

ä½¿ç”¨ `/` æˆ– `+` æ¥å¼ºåˆ¶åˆ†å‰²æç¤ºè¯ã€‚[^13]

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç›¸é‚»é‡å¤çš„ç¬¦å·ä¼šè¢«è¿‡æ»¤ï¼Œ```+++``` çš„æ•ˆæœç­‰åŒäº `+`ï¼Œæ­£ç¡®çš„æ–¹æ³•æ˜¯+å’Œ/åˆ†å¼€æ¥æ‰“ã€‚

æ¯”å¦‚åŒæ ·è¦è¾¾åˆ° 9 ä¸ª token é•¿åº¦çš„åˆ†éš”ï¼š[^13]
```markdown
# ä»¥ä¸‹ä¸‰æ¡æ•ˆæœç±»ä¼¼ï¼Œä¸”ä¸æ€ä¹ˆå¹²æ‰°åç»­è¯è¯­ã€‚å½±å“åº¦ 7%å·¦å³ï¼š
red eyes,/,/,/,/, blue dress     (9 æ ¼åˆ†éš”ï¼ŒæŒ‰é”®ä¹Ÿæ¥è¿‘ï¼Œæ¨èï¼‰
red eyes, /+/+/+/, blue dress (9 æ ¼åˆ†éš”ï¼Œå¹²æ‰°æœ€ä½ï¼‰
red eyes, , , , , , , , ,blue dress (9 æ ¼åˆ†éš”ï¼Œé€—å·ä¹‹é—´è¦æœ‰ç©ºæ ¼ä¸ç„¶æ•ˆæœå‡åŠï¼‰

# ä»¥ä¸‹æ˜¯ä¸æ¨èçš„åŠæ³•ï¼Œå¯¹åç»­è¯è¯­ä»ç„¶æœ‰ 25%å½±å“ï¼Œä¼šå¹²æ‰°ç”»é£ï¼š
red eyes++++++++++++++++++++blue dressÂ Â ï¼ˆåŒæ ·æ˜¯ 9 æ ¼ï¼Œä¸‰ä¸ª+å·åˆ¤æ–­ä¸ºä¸€ä¸ª token)
red eyes/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹/â€‹blue dress ï¼ˆåŒåŠ å·ï¼‰

* Tip-From [^13]
```

### æ³¨æ„åŠ›æ§åˆ¶

é˜…è¯»ç†è®ºåŸºç¡€æˆ‘ä»¬çŸ¥é“ï¼Œæ¯ä¸ªè¯çš„åŸºç¡€æƒé‡æ˜¯ä¸åŒçš„ï¼Œæˆ‘ä»¬å¯¹ä¸åŒæç¤ºçš„æƒé‡å€¼çš„æœŸæœ›ä¹Ÿä¸åŒï¼Œè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨æ³¨æ„åŠ›æ§åˆ¶æ¥è°ƒèŠ‚å®ƒä»¬ä¹‹é—´çš„å…³ç³»äº†ã€‚

| Ui | è¯­æ³• | ç¤ºä¾‹ | æƒé‡å˜åŒ– | æ³¨æ„ |
|:----:| :----: | :----: |:----: |:----: |
| WebUi | `(prompt:num)` | å¼ºè°ƒï¼š`((cat))` `(cat:1.4)`ï¼Œå‡å¼±ï¼š`(cat:0.2)` `[cat]` | ()-> 1.1 |`num` çš„èŒƒå›´æ˜¯ `0.1 ~:100`ï¼Œå¦‚æœä¸ºå°æ•°åˆ™å–æ­¥æ•°æ¯”ä¾‹|
| Nai | `{}` | `{{{cat}}}` `[cat]` | {}-> 1.05 | |
| åŸå§‹å®ç° | +/- | `+cat` `-cat` |  |å•å…ƒæ ¼ |

1. WebUi æƒé‡è¯­æ³•ä¸º `(prompt:num)` æˆ– `((prompt))`ï¼Œå¢å¼ºçš„æƒé‡ä¸ºï¼Œå¢å¼ºçš„èŒƒå›´æ˜¯ `0.1 ~ 100`ï¼Œå¦‚æœä¸ºå°æ•°åˆ™å–æ­¥æ•°æ¯”ä¾‹ã€‚æ¯”å¦‚ å¼ºè°ƒï¼š`((cat))` `(cat:1.4)`ï¼Œå‡å¼±ï¼š`(cat:0.2)` `[cat]`

    ```
    a (word) - å°†æƒé‡æé«˜ 1.1 å€

    a ((word)) - å°†æƒé‡æé«˜ 1.21 å€ï¼ˆ= 1.1 * 1.1ï¼‰ï¼Œä¹˜æ³•çš„å…³ç³»ã€‚

    a [word] - å°†æƒé‡å‡å°‘ 1.1 å€

    a (word:1.5) - å°†æƒé‡æé«˜ 1.5 å€

    a (word:0.25) - å°†æƒé‡å‡å°‘ 4 å€ (= 1 / 0.25)

    a \(word\) - åœ¨æç¤ºä¸­ä½¿ç”¨æ–‡å­— () å­—ç¬¦
    ```

    !!! tip
        æƒé‡å¢åŠ é€šå¸¸ä¼šå ä¸€ä¸ª token ä½ã€‚åœ¨ token ä½ç´§å¼ çš„æƒ…å†µä¸‹æ²¡æœ‰å¿…è¦åŠ ç‰¹åˆ«å¤šæ‹¬å·ã€‚

        è¿‡å¤šåœ†æ‹¬å·ä¼šå¯¼è‡´ å­—ç¬¦ è¢«ç¨‹åºåƒæ‰ï¼Œ`a ((((farm))), daytime` ä¼šå˜æˆ `a farm daytime` è€Œæ²¡æœ‰é€—å·ã€‚

        WebUi å¯¹äºå¸¦æ‹¬å·æç¤ºè¯æ¯”å¦‚ `a (word)`  **è¯·ä½¿ç”¨ `\` å­—ç¬¦è½¬ä¹‰ä¸º `a \(word\)`**ï¼Œè¿™é€‚ç”¨äºå¸¦æ‹¬å·çš„ Tag, é˜²æ­¢å‡ºç°æœ¬æ¥ä¸æƒ³è¦çš„å¢å¼ºæ•ˆæœã€‚

2. NAI åˆ™ä½¿ç”¨ `{}` æ¥åšå¢å¼ºï¼Œä¸å¯ä»¥æŒ‡å®šæƒé‡ã€‚æ¯”å¦‚ `{{{cat}}}` `[cat]`

   NAI ä¸­ä¸å…è®¸å•ç‹¬æŒ‡å®šæƒé‡ï¼Œä½†æ”¯æŒæ··åˆæƒé‡ `cat:1|happy:-0.2|cute:-0:3` è¿™æ ·çš„è¯­æ³•ï¼Œ`(cat :2 | dog)` ä¹Ÿå°±æ˜¯æ›´åƒçŒ«çš„ç‹—ã€‚

   **æ¢ç®—å…³ç³»**

   NAI çš„ [word] = WebUi(word: 0.952)(0.952 = 1/1.05)
    
   NAI çš„{word} = WeUi çš„ (word: 1.05)
    
   NAI èŠ±æ‹¬å·æƒé‡ä¸º 1.05/ä¸ªï¼ŒWebUi åœ†æƒé‡ä¸º 1.1/ä¸ª

3. é™ä½æƒé‡ï¼Œå•ç‹¬ä½¿ç”¨ `[]` æˆ–è€… `(word:0.952)`ã€‚NAI ä»…èƒ½ä½¿ç”¨ `[]`

!!! tip "è¯·å‹¿æ··æ·†"

    NAI ä¸ WebUi çš„æç¤ºè¯è¯­æ³• **ä¸é€šç”¨**

    å› ä¸º NAI ä½¿ç”¨çš„æ˜¯ WebUi 2022 å¹´ 9 æœˆä¹‹å‰çš„å®ç°ï¼Œæ‰€ä»¥æƒé‡å¢å¼ºè¯­æ³•æ˜¯æ—§çš„ `{}` ï¼Œæ–°çš„ WebUi æ›´æ”¹ä¸º `()`ã€‚
    
    NAI ä¸æ”¯æŒæŒ‡å®šæç¤ºè¯çš„æƒé‡ã€‚

    å¦‚æœä½ æƒ³ä¾¿æ·è½¬æ¢æƒé‡ï¼Œå¯ä»¥ä½¿ç”¨ [è½¬æ¢æœåŠ¡](https://t.me/M2NM2NBot)

??? tip "How It Work"
    æ¯ä¸ªå•è¯éƒ½æœ‰ä¸€ä¸ª 768 ä¸ªå€¼çš„ç›¸å…³å‘é‡ï¼Œè¯¥å‘é‡â€œæŒ‡å‘â€æ¦‚å¿µçš„æ–¹å‘ï¼ˆåœ¨ 768 ç»´ç©ºé—´ä¸­ï¼‰ã€‚

    å¦‚æœä½ ç¼©æ”¾è¿™ä¸ªå‘é‡ï¼Œè¿™ä¸ªæ¦‚å¿µä¼šå˜å¾—æ›´å¼ºæˆ–æ›´å¼±ã€‚
    
    SEE [Here](https://github.com/AUTOMATIC1111/stable-diffusion-webui/discussions/2905)

![ç¼ºå°‘ç¤ºä¾‹å›¾ç‰‡]

### æç¤ºè¯äº¤æ›¿

æç¤ºè¯äº¤æ›¿ï¼ˆalternate promptï¼‰[^7]ï¼Œå³ Prompt æ··åˆæœºã€‚è¿™é¡¹æŠ€æœ¯ç”± UI å®ç°ã€‚[^9]

```
[alison brie|emma stone|elizabeth olsen|scarlett johansson|anne hathaway|emma roberts], still film
```

å®ƒå¯ä»¥åˆ›å»ºåŠ¨ç‰©ã€äººæˆ–é£æ ¼çš„æ··åˆä½“ï¼Œæ¯ä¸€ä¸ª `step` åˆ‡æ¢ä¸€ä¸ªæç¤ºï¼ˆä¸€æ­¥ä¸€æ¢è½®ç¯æ¸²æŸ“ï¼‰ã€‚

![ç¼ºå°‘ç¤ºä¾‹å›¾ç‰‡]

### Prompt matrix çŸ©é˜µ

WebUi ä½¿ç”¨ `|` åˆ†éš”å¤šä¸ªå…³é”®è¯ä»¥æ··åˆå¤šä¸ªè¦ç´ ï¼Œç¨‹åºå°†ä¸ºå®ƒä»¬çš„æ¯ä¸ªç»„åˆç”Ÿæˆä¸€ä¸ªå›¾åƒã€‚è¿™é¡¹æŠ€æœ¯ç”± UI å®ç°ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœä½¿ç”¨ `a busy city street in a modern city|illustration|cinematic lighting` ï¼Œåˆ™å¯èƒ½æœ‰å››ç§ç»„åˆï¼ˆå§‹ç»ˆä¿ç•™æç¤ºçš„ç¬¬ä¸€éƒ¨åˆ†ï¼‰ï¼š

- a busy city street in a modern city
- a busy city street in a modern city, illustration
- a busy city street in a modern city, cinematic lighting
- a busy city street in a modern city, illustration, cinematic lighting

![ç¼ºå°‘ç¤ºä¾‹å›¾ç‰‡]

å¯ä»¥è¿›ä¸€æ­¥åœ¨å…³é”®è¯åæ·»åŠ  : x æ¥æŒ‡å®šå•ä¸ªå…³é”®è¯çš„æƒé‡ã€‚

- NAI 

åœ¨ NAI ä¸­ä»£è¡¨å¹³å‡æƒé‡æ··åˆï¼ˆå‰åŠéƒ¨åˆ†å’ŒååŠéƒ¨åˆ†ï¼‰ã€‚

`cat :2 | dog` ä¹Ÿå°±æ˜¯æ›´åƒçŒ«çš„ç‹—

![ç¼ºå°‘ç¤ºä¾‹å›¾ç‰‡]

### Prompt Schedule

Prompt Schedule å¯ä»¥åœ¨æ¨ç†å›¾åƒçš„è¿‡ç¨‹ä¸­æ›´æ”¹ Promptï¼Œè¿™é¡¹æŠ€æœ¯ç”± UI å®ç°ã€‚

è¯­æ³•ä¸º `[from:to:when]`

å…¶ä¸­ `from` å’Œ `to` ä¸º promptï¼Œ when æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œç”¨äºå®šä¹‰åº”åœ¨é‡‡æ ·å‘¨æœŸå¤šé•¿æ—¶é—´å†…è¿›è¡Œåˆ‡æ¢ã€‚

- `[fantasy:cyberpunk:16]` ä»£è¡¨ä»ç¬¬ 16 step åï¼Œä½¿ç”¨ `cyberpunk` æ ‡ç­¾æ›¿æ¢ `fantasy`

- `[to:when]` åœ¨å›ºå®šæ•°é‡çš„ step åæ·»åŠ  `to` åˆ°æç¤º ( when)

- `[from::when]` åœ¨å›ºå®šæ•°é‡çš„ step åä»æç¤ºä¸­åˆ é™¤ `from`( when)

æ¯”å¦‚ï¼š

- `[fantasy:cyberpunk:16]` ä»£è¡¨ä»ç¬¬ 16 step åï¼Œä½¿ç”¨ `cyberpunk` æ ‡ç­¾æ›¿æ¢ `fantasy`

- `[male: female: 0.0]`, æ„å‘³ç€ä½ å¼€å§‹æ—¶å°±è¦æ±‚ç”»ä¸€ä¸ªå¥³æ€§ã€‚

æ•ˆæœï¼š

![sample_Gradient](https://user-images.githubusercontent.com/75739606/197822841-f7323afa-8c6a-46a2-a8e2-a1c457bb31d5.jpg)

<!--
![sample_Gradient](https://raw.githubusercontent.com/sudoskys/StableDiffusionBook/main/resource/sample_Gradient.jpg)
-->

## æˆä¸ºè°ƒå‚å·¥ç¨‹å¸ˆ

è¿™äº›æŒ‡å—å¯ä»¥è®©ä½ æ›´è¿›ä¸€æ­¥ã€‚

- [emphasis æµ‹è¯•](https://github.com/JohannesGaessler/stable-diffusion-tools/tree/master/emphasis)

- [é¢å‘ NAI çš„æµ‹è¯•](https://github.com/6DammK9/nai-anime-pure-negative-prompt)

- [https://github.com/Maks-s/sd-akashic](https://github.com/Maks-s/sd-akashic)

- [https://github.com/willwulfken/MidJourney-Styles-and-Keywords-Reference](https://github.com/willwulfken/MidJourney-Styles-and-Keywords-Reference)

[^9]:[alternate prompt](https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/1733)

[^13]:[Nga æˆ‘æµå¿ƒå¾—](https://nga.178.com/read.php?pid=654605407&opt=128)